# Vercel æ•°æ®åº“è¿ç§»è¯´æ˜

## é—®é¢˜è¯´æ˜

Vercel Serverless ç¯å¢ƒåœ¨**æ„å»ºé˜¶æ®µæ— æ³•è®¿é—®ç”Ÿäº§æ•°æ®åº“**ï¼Œå› æ­¤ `build_files.sh` ä¸­çš„ `migrate` å‘½ä»¤æ— æ³•æ‰§è¡Œã€‚

## âš¡ å¿«é€Ÿä¿®å¤ï¼ˆæ¨èï¼‰

### æ–¹æ³• 1: ç›´æ¥åœ¨ Supabase æ‰§è¡Œ SQLï¼ˆæœ€å¿«ï¼‰

1. è®¿é—® https://supabase.com/dashboard
2. é€‰æ‹©é¡¹ç›® â†’ SQL Editor
3. æ‰§è¡Œä»¥ä¸‹ SQLï¼š

```sql
-- æ·»åŠ  quantity å­—æ®µ
ALTER TABLE shop_order
ADD COLUMN quantity INTEGER NOT NULL DEFAULT 1;

-- éªŒè¯
SELECT * FROM information_schema.columns
WHERE table_name = 'shop_order' AND column_name = 'quantity';
```

---

### æ–¹æ³• 2: ä½¿ç”¨è¿ç§»è„šæœ¬ï¼ˆé€‚åˆæœ¬åœ°ç¯å¢ƒï¼‰

å¦‚æœæ‚¨æœ‰æœ¬åœ°å¼€å‘ç¯å¢ƒè¿æ¥åˆ° Supabaseï¼š

```bash
cd django_shop
python migrate.py
```

---

### æ–¹æ³• 3: ä½¿ç”¨ Django Admin å‘½ä»¤

å¦‚æœæ‚¨çš„æœ¬åœ°ç¯å¢ƒé…ç½®äº†ç”Ÿäº§æ•°æ®åº“ï¼š

```bash
cd django_shop
python manage.py migrate
```

---

## ğŸ“‹ æ‰€éœ€æ‰§è¡Œçš„è¿ç§»

### è¿ç§» 0003: æ·»åŠ  quantity å­—æ®µ

**æ–‡ä»¶**: `shop/migrations/0003_order_quantity.py`

**ä½œç”¨**: åœ¨ `shop_order` è¡¨æ·»åŠ  `quantity` å­—æ®µï¼ˆè´­ä¹°æ•°é‡ï¼‰

**SQL ç­‰æ•ˆå‘½ä»¤**:
```sql
ALTER TABLE shop_order
ADD COLUMN quantity INTEGER NOT NULL DEFAULT 1;
```

---

## ğŸ” å¦‚ä½•éªŒè¯è¿ç§»å·²æ‰§è¡Œ

### æ–¹æ³• 1: åœ¨ Supabase æŸ¥è¯¢

```sql
SELECT column_name, data_type, column_default
FROM information_schema.columns
WHERE table_name = 'shop_order';
```

åº”è¯¥èƒ½çœ‹åˆ° `quantity` åˆ—ã€‚

### æ–¹æ³• 2: è®¿é—®åå°

è®¿é—® `https://myshop.fyyd.net/admin/shop/order/`

å¦‚æœä¸å†æŠ¥é”™ï¼Œè¯´æ˜è¿ç§»æˆåŠŸã€‚

---

## ğŸ’¡ å°†æ¥çš„è¿ç§»æµç¨‹

æ¯æ¬¡æ·»åŠ æ–°åŠŸèƒ½éœ€è¦æ•°æ®åº“è¿ç§»æ—¶ï¼š

1. **å¼€å‘é˜¶æ®µ**:
   ```bash
   python manage.py makemigrations
   python manage.py migrate  # æœ¬åœ°æµ‹è¯•
   ```

2. **æäº¤ä»£ç **:
   ```bash
   git add shop/migrations/
   git commit -m "æ·»åŠ æ•°æ®åº“è¿ç§»"
   git push
   ```

3. **ç”Ÿäº§ç¯å¢ƒæ‰§è¡Œ**:
   - åœ¨ Supabase SQL Editor æ‰‹åŠ¨æ‰§è¡Œè¿ç§» SQL
   - æˆ–ä½¿ç”¨æœ¬åœ°ç¯å¢ƒè¿æ¥ç”Ÿäº§æ•°æ®åº“æ‰§è¡Œ `migrate`

---

## âš ï¸ æ³¨æ„äº‹é¡¹

- Vercel çš„ Serverless ç¯å¢ƒ**ä¸é€‚åˆ**åœ¨æ„å»ºæ—¶æ‰§è¡Œè¿ç§»
- å»ºè®®ä½¿ç”¨ Supabase SQL Editor ç›´æ¥æ‰§è¡Œ
- é‡è¦è¿ç§»å‰è¯·å…ˆ**å¤‡ä»½æ•°æ®åº“**
- å¯ä»¥è€ƒè™‘ä½¿ç”¨ GitHub Actions åœ¨éƒ¨ç½²åè‡ªåŠ¨æ‰§è¡Œè¿ç§»

---

## ğŸ“š ç›¸å…³èµ„æº

- [Django Migrations æ–‡æ¡£](https://docs.djangoproject.com/en/5.0/topics/migrations/)
- [Supabase SQL Editor](https://supabase.com/docs/guides/database/overview)
- [Vercel Serverless Functions](https://vercel.com/docs/concepts/functions/serverless-functions)
